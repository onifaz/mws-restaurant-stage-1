let restaurant,map;document.addEventListener("DOMContentLoaded",e=>{if(fetchRestaurantFromURL((e,t)=>{e&&console.error(e)}),window.innerWidth>=992){const e=document.getElementById("map").getElementsByTagName("a")[0];window.setTimeout(e.click(),250)}}),window.initDetailMap=(()=>{self.restaurant&&(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:self.restaurant.latlng,scrollwheel:!1}),"object"==typeof google&&"object"==typeof google.maps&&DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))}),addGmapDetail=(()=>{document.getElementById("map-container").setAttribute("class","map--requested");const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBN-_N7NAK_k8QKsoHe6pd4M8aIhA1HX6E&libraries=places&callback=initDetailMap",e.type="text/javascript",document.body.appendChild(e)}),fetchRestaurantFromURL=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(document.title=self.restaurant.name+" Restaurant Info",fillBreadcrumb(),fillRestaurantHTML(),lazyload(),e(null,n)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name;const t=document.getElementById("restaurant-address");t.innerHTML=e.address,t.setAttribute("tabindex","0");const n=document.getElementById("restaurant-img"),a=DBHelper.imageUrlForRestaurant(e);n.append(a),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours"),n=document.createElement("tr"),a=document.createElement("th"),r=document.createElement("th");a.setAttribute("scope","col"),a.setAttribute("tabindex","0"),a.innerHTML="Day",n.appendChild(a),r.setAttribute("scope","col"),r.setAttribute("tabindex","0"),r.innerHTML="Opening hours",n.appendChild(r),t.appendChild(n);for(let n in e){const a=document.createElement("tr"),r=document.createElement("td"),i=document.createElement("td");r.innerHTML=n,r.setAttribute("tabindex","0"),a.appendChild(r),i.innerHTML=e[n],i.setAttribute("tabindex","0"),a.appendChild(i),t.appendChild(a)}}),fillReviewsHTML=((e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),n=document.createElement("h2");if(n.innerHTML="Reviews",n.setAttribute("id","reviews-title"),t.appendChild(n),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const a=document.getElementById("reviews-list");e.forEach(e=>{a.appendChild(createReviewHTML(e))}),t.appendChild(a)}),createReviewHTML=(e=>{const t=document.createElement("li"),n=document.createElement("article");n.setAttribute("tabindex","0"),n.setAttribute("role","article"),n.setAttribute("arial-label","Review.");const a=document.createElement("div"),r=document.createElement("p");r.innerHTML=e.date,r.setAttribute("aria-label",`Date: ${e.date}.`),r.setAttribute("class","review--date"),a.appendChild(r);const i=document.createElement("p");i.innerHTML=e.name,i.setAttribute("class","review--author"),i.setAttribute("aria-label",`Author: ${e.name}.`),a.appendChild(i),a.setAttribute("class","review--head"),n.appendChild(a);const l=document.createElement("p");let s='<span class="review--ratingTitle" arial-hidden="true">Rating</span> <span class="review--ratingStars" arial-hidden="true">';for(let t=0,n=e.rating;t<n;t++)s+='<span class="full">&#9733;</span>';if(e.rating<5)for(let t=0,n=5-e.rating;t<n;t++)s+='<span class="empty"></span>';s+="</span>",l.innerHTML=s,l.setAttribute("aria-label",`Rating: ${e.rating} out of 5.`),l.setAttribute("class","review--rating"),n.appendChild(l);const d=document.createElement("p");return d.innerHTML=e.comments,d.setAttribute("class","review--comment"),n.appendChild(d),t.appendChild(n),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb").getElementsByTagName("ol")[0],n=document.createElement("li"),a=document.createElement("a");a.innerHTML=e.name,a.setAttribute("aria-current","page"),n.appendChild(a),t.appendChild(n)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null});
//# sourceMappingURL=restaurant_info.js.map
