let restaurant,map;document.addEventListener("DOMContentLoaded",e=>{fetchRestaurantFromURL((e,t)=>{e&&console.error(e)})}),window.initDetailMap=(()=>{self.restaurant&&(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:self.restaurant.latlng,scrollwheel:!1}),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))}),fetchRestaurantFromURL=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(document.title=self.restaurant.name+" Restaurant Info",fillBreadcrumb(),fillRestaurantHTML(),e(null,n)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name;const t=document.getElementById("restaurant-address");t.innerHTML=e.address,t.setAttribute("tabindex","0");const n=document.getElementById("restaurant-img");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),n.setAttribute("alt","Photo of "+e.name+" restaurant"),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours"),n=document.createElement("tr"),r=document.createElement("th"),a=document.createElement("th");r.setAttribute("scope","col"),r.setAttribute("tabindex","0"),r.innerHTML="Day",n.appendChild(r),a.setAttribute("scope","col"),a.setAttribute("tabindex","0"),a.innerHTML="Opening hours",n.appendChild(a),t.appendChild(n);for(let n in e){const r=document.createElement("tr"),a=document.createElement("td"),i=document.createElement("td");a.innerHTML=n,a.setAttribute("tabindex","0"),r.appendChild(a),i.innerHTML=e[n],i.setAttribute("tabindex","0"),r.appendChild(i),t.appendChild(r)}}),fillReviewsHTML=((e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),n=document.createElement("h2");if(n.innerHTML="Reviews",n.setAttribute("id","reviews-title"),t.appendChild(n),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const r=document.getElementById("reviews-list");e.forEach(e=>{r.appendChild(createReviewHTML(e))}),t.appendChild(r)}),createReviewHTML=(e=>{const t=document.createElement("li"),n=document.createElement("article");n.setAttribute("tabindex","0"),n.setAttribute("role","article"),n.setAttribute("arial-label","Review.");const r=document.createElement("div"),a=document.createElement("p");a.innerHTML=e.date,a.setAttribute("aria-label",`Date: ${e.date}.`),a.setAttribute("class","review--date"),r.appendChild(a);const i=document.createElement("p");i.innerHTML=e.name,i.setAttribute("class","review--author"),i.setAttribute("aria-label",`Author: ${e.name}.`),r.appendChild(i),r.setAttribute("class","review--head"),n.appendChild(r);const l=document.createElement("p");let s='<span class="review--ratingTitle" arial-hidden="true">Rating</span> <span class="review--ratingStars" arial-hidden="true">';for(let t=0,n=e.rating;t<n;t++)s+='<span class="full">&#9733;</span>';if(e.rating<5)for(let t=0,n=5-e.rating;t<n;t++)s+='<span class="empty"></span>';s+="</span>",l.innerHTML=s,l.setAttribute("aria-label",`Rating: ${e.rating} out of 5.`),l.setAttribute("class","review--rating"),n.appendChild(l);const d=document.createElement("p");return d.innerHTML=e.comments,d.setAttribute("class","review--comment"),n.appendChild(d),t.appendChild(n),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb").getElementsByTagName("ol")[0],n=document.createElement("li"),r=document.createElement("a");r.innerHTML=e.name,r.setAttribute("aria-current","page"),n.appendChild(r),t.appendChild(n)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null});
//# sourceMappingURL=restaurant_info.js.map
